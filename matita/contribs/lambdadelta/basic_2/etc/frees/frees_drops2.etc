include "basic_2/static/frees_drops.ma".

axiom frees_inv_drops_next_sle: âˆ€f1,L1,T1. L1 âŠ¢ ğ…*â¦ƒT1â¦„ â‰¡ f1 â†’ âˆ€f2. f1 âŠ† f2 â†’
                                âˆ€I2,L2,V2,n. â¬‡*[n] L1 â‰¡ L2.â“‘{I2}V2 â†’
                                âˆ€g1. â«¯g1 = â«±*[n] f1 â†’
                                âˆ€g2. L2 âŠ¢ ğ…*â¦ƒV2â¦„ â‰¡ g2 â†’ â†‘*[n]â«¯g2 âŠ† f2.

lemma frees_drops_next_sle: âˆ€f1,L1,T1. L1 âŠ¢ ğ…*â¦ƒT1â¦„ â‰¡ f1 â†’ âˆ€f2. (
                               âˆ€n. â¬‡*[â’», ğ”â´nâµ] L1 â‰¡ â‹† â†’
                               âˆ€g1. â«¯g1 = â«±*[n] f1 â†’
                               âˆ€g2. ğˆâ¦ƒg2â¦„ â†’ â†‘*[n]â«¯g2 âŠ† f2
                            ) â†’ (
                               âˆ€I2,L2,V2,n. â¬‡*[n] L1 â‰¡ L2.â“‘{I2}V2 â†’
                               âˆ€g1. â«¯g1 = â«±*[n] f1 â†’
                               âˆ€g2. L2 âŠ¢ ğ…*â¦ƒV2â¦„ â‰¡ g2 â†’ â†‘*[n]â«¯g2 âŠ† f2
                            ) â†’ (
                               âˆ€I2,L2,n. â¬‡*[n] L1 â‰¡ L2.â“¤{I2} â†’
                               âˆ€g1. â«¯g1 = â«±*[n] f1 â†’
                               âˆ€g2. ğˆâ¦ƒg2â¦„ â†’ â†‘*[n]â«¯g2 âŠ† f2
                            ) â†’ f1 âŠ† f2.
#f1 #L1 #T1 #H @(frees_ind_void â€¦ H) -f1 -L1 -T1
[ /2 width=1 by sle_isid_sn/
| /2 width=2 by/
| /3 width=5 by drops_refl/
| /3 width=3 by drops_refl/
| /6 width=5 by drops_drop, sle_inv_tl_dx, sle_px_tl/
| /2 width=1 by sle_isid_sn/
| #f1a #f1b #f1 #p #I1 #L1 #V1 #T1 #_ #_ #Hf1 #IHa #IHb #f2 #H1 #H2 #H3
  lapply (sor_tls â€¦ Hf1) #Hn
  @(sor_inv_sle â€¦ Hf1) -Hf1
  [ @IHa -IHa -IHb [| #I2 #L2 #V2 | #I2 #L2 ] #n #HL #g1a #Hg1a #g2 #Hg2
    lapply (Hn n) -Hn <Hg1a -Hg1a #H
    elim (sor_nxx_tl â€¦ H) -H /2 width=5 by/
  | @sle_xn_tl [2: |*: // ]
    @IHb -IHa -IHb [| #I2 #L2 #V2 | #I2 #L2 ] * [1,3,5: |*: #n ] #HL #g1b #Hg1b #g2 #Hg2
    [1,2,3:
      lapply (drops_fwd_isid â€¦ HL ?) -HL // #H destruct -H1 -H2 -H3
      /3 width=5 by sle_isid_sn, sle_next/
    |4,5,6:
      lapply (drops_inv_drop1 â€¦ HL) -HL #HL
      lapply (Hn n) -Hn >tls_xn <Hg1b -Hg1b #H
      elim (sor_xnx_tl â€¦ H) -H /3 width=5 by sle_weak/
    ]
  ]
| #f1a #f1b #f1 #I1 #L1 #V1 #T1 #_ #_ #Hf1 #IHa #IHb #f2 #H1 #H2 #H3
  lapply (sor_tls â€¦ Hf1) #H
  @(sor_inv_sle â€¦ Hf1) -Hf1
  [ @IHa -IHa -IHb [| #I2 #L2 #V2 | #I2 #L2 ] #n #HL #g1a #Hg1a #g2 #Hg2
    lapply (H n) -H <Hg1a -Hg1a #H
    elim (sor_nxx_tl â€¦ H) -H /2 width=5 by/
  | @IHb -IHa -IHb [| #I2 #L2 #V2 | #I2 #L2 ] #n #HL #g1b #Hg1b #g2 #Hg2
    lapply (H n) -H <Hg1b -Hg1b #H
    elim (sor_xnx_tl â€¦ H) -H /2 width=5 by/
  ]
]
qed-.
